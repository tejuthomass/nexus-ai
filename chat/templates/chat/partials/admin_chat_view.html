<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <title>View Chat - {{ session.title }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <style>body { font-family: 'Inter', sans-serif; background-color: #212121; }</style>
</head>
<body class="text-gray-100 p-8 min-h-screen bg-[#212121]">

    <div class="max-w-3xl mx-auto">
        <div class="mb-8 border-b border-white/10 pb-4">
            <h1 class="text-2xl font-bold text-white">{{ session.title }}</h1>
            <p class="text-sm text-gray-500">User: {{ session.user.username }} | Date: {{ session.created_at }}</p>
        </div>

        <div class="space-y-6">
            {% for msg in messages %}
                {% if msg.role == 'user' %}
                    <div class="flex justify-end">
                        <div class="bg-[#2F2F2F] text-gray-100 px-5 py-3 rounded-2xl rounded-tr-sm max-w-[80%] border border-white/5">
                            {{ msg.content }}
                        </div>
                    </div>
                {% else %}
                    <div class="flex gap-4">
                        <div class="w-8 h-8 rounded-full bg-green-600/90 flex-shrink-0 flex items-center justify-center text-white text-xs mt-1">AI</div>
                        <div class="flex-1 prose prose-invert max-w-none">
                            {{ msg.get_html_content|safe }}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
    <script>hljs.highlightAll();</script>
</body>
</html>